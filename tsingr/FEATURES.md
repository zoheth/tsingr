# TsingR 刷题助手 - 功能说明

## ✅ 已实现功能

### 1. 题目学习功能
- ✅ 题目浏览（列表模式）
- ✅ 分类浏览（目录树模式）
- ✅ 题目搜索
- ✅ 题目筛选（热度、标签）
- ✅ 题目详情查看
- ✅ 标记已学习
- ✅ 收藏功能

### 2. 作答和笔记功能 ⭐ 新增
- ✅ 题目作答编辑器（支持多行文本）
- ✅ 学习笔记编辑器（支持多行文本）
- ✅ 自动保存作答和笔记
- ✅ 查看/编辑模式切换
- ✅ 所有数据本地存储

### 3. 数据导入导出 ⭐ 新增
- ✅ 导出学习数据为JSON文件
- ✅ 从JSON文件导入数据
- ✅ 三种合并策略：
  - 智能合并（推荐）：保留最优数据
  - 覆盖本地：用导入数据替换
  - 保留本地：仅添加新题目
- ✅ 导入导出统计信息
- ✅ 自动生成带时间戳的文件名

### 4. 数据统计
- ✅ 总题数统计
- ✅ 已学习题目统计
- ✅ 收藏题目统计
- ✅ 学习进度追踪

### 5. UI/UX优化
- ✅ 响应式设计（手机/平板/桌面）
- ✅ 分类目录树导航
- ✅ 标题格式化（中文数字 → 阿拉伯数字）
- ✅ 标题序号排序
- ✅ Tab布局（题目信息 + 我的学习）
- ✅ 设置页面

## 📋 数据结构

### StudyRecord（学习记录）
```json
{
  "questionId": 1,
  "studyCount": 5,
  "lastStudyTime": "2025-01-15T10:30:00.000Z",
  "isFavorite": true,
  "answer": "用户的答案内容...",
  "notes": "学习笔记内容...",
  "lastModified": "2025-01-15T11:00:00.000Z"
}
```

### 导出数据格式
```json
{
  "version": "1.0.0",
  "exportTime": "2025-01-15T11:00:00.000Z",
  "recordCount": 100,
  "records": {
    "1": { /* StudyRecord */ },
    "2": { /* StudyRecord */ },
    ...
  }
}
```

## 🎯 使用场景

### 场景1：单设备使用
- 直接使用应用，所有数据本地存储
- 定期导出备份到云盘（推荐）

### 场景2：多设备同步
**当前方案（手动同步）：**
1. 在设备A：设置 → 导出学习数据 → 保存到云盘
2. 在设备B：从云盘下载文件
3. 在设备B：设置 → 导入学习数据 → 选择"智能合并"

**未来方案（自动同步）：**
- Firebase实时同步
- 多设备自动保持最新数据

## 📱 支持平台
- ✅ Android
- ✅ iOS
- ✅ Windows
- ✅ macOS
- ✅ Linux
- ✅ Web

## 🔧 技术架构

### 可扩展性设计
1. **抽象同步接口** ([sync_service_interface.dart](lib/services/sync_service_interface.dart))
   - 定义统一的同步服务接口
   - 支持多种实现：本地文件、Firebase、WebDAV等

2. **数据模型** ([study_record.dart](lib/models/study_record.dart))
   - 完整的JSON序列化/反序列化
   - 智能数据合并算法
   - 时间戳用于冲突解决

3. **存储服务** ([storage_service.dart](lib/services/storage_service.dart))
   - 本地持久化存储
   - 预留云端同步接口

4. **导入导出服务** ([export_import_service.dart](lib/services/export_import_service.dart))
   - 独立的导入导出逻辑
   - 支持多种合并策略
   - 详细的统计信息

## 🚀 即将推出

### Firebase自动同步
- ☐ 用户认证（匿名/邮箱登录）
- ☐ 实时数据同步
- ☐ 离线支持
- ☐ 冲突自动解决
- ☐ 多设备自动同步

### 更多功能
- ☐ 题目标注和高亮
- ☐ 学习提醒
- ☐ 刷题计划
- ☐ 错题本
- ☐ 数据可视化
- ☐ 导出学习报告

## 📖 用户指南

### 如何导出数据？
1. 点击主页右上角"设置"图标
2. 选择"导出学习数据"
3. 选择保存位置
4. 文件会自动命名为 `tsingr_backup_YYYYMMDD_HHMM.json`

### 如何导入数据？
1. 点击主页右上角"设置"图标
2. 选择"导入学习数据"
3. 选择合并策略：
   - **智能合并**（推荐）：保留学习次数最多的，使用最新的笔记和作答
   - **覆盖本地**：完全替换本地数据
   - **保留本地**：只添加新题目
4. 选择JSON文件
5. 查看导入统计

### 如何在设备间同步？
**方法1：通过云盘（推荐）**
1. 设备A导出 → 上传到云盘（如坚果云、OneDrive）
2. 设备B从云盘下载 → 导入

**方法2：通过文件传输**
1. 导出数据
2. 通过AirDrop/蓝牙/数据线传输
3. 在另一设备导入

## 🔒 数据安全

### 本地存储
- 使用 `shared_preferences` 安全存储
- 数据仅存储在本地设备
- 应用卸载后数据会丢失（建议定期备份）

### 导出文件
- 标准JSON格式
- 纯文本，可用任何文本编辑器查看
- 不含敏感信息
- 可加密后上传云盘

### 未来Firebase同步
- 端到端加密传输
- 用户数据隔离
- 符合GDPR隐私标准

## 💡 最佳实践

1. **定期备份**
   - 建议每周导出一次数据
   - 保存多个历史版本

2. **命名规范**
   - 保留系统生成的时间戳文件名
   - 便于识别和管理

3. **云盘同步**
   - 使用坚果云等支持自动同步的服务
   - 设置自动上传导出文件夹

4. **数据验证**
   - 导入后检查统计信息
   - 确认关键题目的数据完整

## 🐛 故障排除

### 导入失败
- 检查文件格式是否为JSON
- 确认文件未损坏
- 查看错误提示信息

### 数据丢失
- 检查是否有备份文件
- 尝试从云盘恢复
- 联系技术支持

## 📞 技术支持

- GitHub Issues: [提交问题](https://github.com/yourusername/tsingr/issues)
- 邮箱: support@tsingr.com
